// ==UserScript==
// @name         Henry Hospitals Data
// @namespace    https://github.com/shin-926/Henry
// @version      1.2.0
// @description  香川県高松市の病院データ（診療科・医師情報）
// @author       shin
// @match        https://henry-app.jp/*
// @grant        none
// @updateURL    https://raw.githubusercontent.com/shin-926/Henry/main/henry_hospitals.user.js
// @downloadURL  https://raw.githubusercontent.com/shin-926/Henry/main/henry_hospitals.user.js
// @run-at       document-start
// ==/UserScript==

/**
 * Henry Hospitals Data
 *
 * 使用方法:
 * - 他のスクリプトから @require でロードする
 * - window.HenryHospitals でアクセス
 *
 * データ構造:
 * {
 *   '病院名': {
 *     departments: {
 *       '診療科名': ['医師名1', '医師名2', ...]
 *     }
 *   }
 * }
 *
 * 注意:
 * - データは2026年1月26日時点のもの（各病院公式サイトより取得）
 * - 定期的な更新を推奨
 */

(function() {
  'use strict';

  const HOSPITALS = {
    'りつりん病院': {
      departments: {
        '内科': ['岡田泰昌', '伴夏樹'],
        '循環器内科': ['大森浩二', '森下智文'],
        '小児科': ['松浦聡'],
        '外科': ['西谷暁子', '因藤春秋', '出石邦彦'],
        '整形外科': ['田村知雄', '福岡達郎', '秋田光輝', '佐藤容平'],
        '脳神経外科': ['森﨑訓明', '四宮あや'],
        '皮膚科': ['野網淑子'],
        '泌尿器科': ['坂本英起', '大橋洋三'],
        '婦人科': ['神余泰宏'],
        '眼科': ['藤村貴志', '三好浩介'],
        '耳鼻いんこう科': ['酒井遥'],
        '放射線科': ['福永浩太郎'],
        '歯科口腔外科': ['松井裕一'],
        '麻酔科': ['小西英毅'],
        '健康管理センター': ['大森浩二', '髙野実子', '田中徹也'],
        '検査部': ['大森吾朗']
      }
    },

    '高松市立みんなの病院': {
      departments: {
        '総合内科': ['六車直樹', '岸本伸人'],
        '内科': ['井手宏明', '深田学史', '山口佑樹'],
        '呼吸器内科': ['岸本伸人', '堀内宣昭', '埴淵昌毅'],
        '消化器内科': ['六車直樹', '北村晋志', '八木麻衣', '髙橋叡', '佐藤康史', '平尾章博'],
        '循環器内科': ['藤原美佳', '冠野昂太郎', '山田博胤', '伊藤浩敬'],
        '脳神経内科': ['浦井由光', '向井麻央'],
        '外科': ['居村暁', '黒田武志', '篠原永光', '吉川幸造', '中川美砂子', '和田大助'],
        '呼吸器外科': ['呉哲彦', '加藤歩'],
        '脳神経外科・血管内治療科': ['松原俊二', '庄野健児', '四方英二', '佐藤悠', '藤原敏孝'],
        '整形外科': ['吉田雄介', '齊藤仁彦', '平瀬公威'],
        '形成外科': ['髙津州雄', '記本明静'],
        '精神科': [],
        '小児科': ['藤井笑子', '冨田智子', '渡邊典子', '高見容子'],
        '皮膚科': [],
        '泌尿器科': ['高橋正幸', '小森政嗣', '森英恭', '大森正志'],
        '産婦人科': ['加藤剛志', '山下瑞穂', '德井貴子', '三宅すずか', '大西美嘉子'],
        '眼科': ['谷英紀'],
        '耳鼻咽喉科': ['近藤昭男', '記本直輝'],
        'リハビリテーション科': ['松原俊二', '白川典仁'],
        '放射線科': ['林義典', '原田太平'],
        '病理診断科': ['榊美佳', '熊谷久治郎', '厚美憲吾'],
        '臨床検査科': [],
        '歯科口腔外科': ['大江剛'],
        '麻酔科': ['片山俊子', '山口由紀', '松本弥子']
      }
    },

    'KKR高松病院': {
      departments: {
        '内科（総合内科）': ['森由弘', '前田剛', '厚井文一'],
        '呼吸器内科': ['森由弘', '荒川裕佳子', '市川裕久', '松岡克浩'],
        '消化器内科': ['前田剛', '石川茂直', '河野寿明', '龍田美和', '冨田明美', '佐藤雄大', '木村駿吾'],
        '循環器内科': ['高木雄一郎', '松元一郎', '難波経立', '和田健作', '黒住瑞紀'],
        '代謝内分泌内科': ['村尾敏', '吉川理津子'],
        '腎臓内科': ['松原啓介'],
        '脳神経内科': ['塚口眞砂'],
        'リウマチ科': ['尾崎洋基', '井上有希'],
        '消化器外科': ['江原和男', '藤田尚久', '上村淳', '鈴木啓文', '水田悠介'],
        '呼吸器外科': ['石川真也'],
        '泌尿器科': ['平間裕美', '松岡祐貴'],
        '眼科': [],
        '麻酔科': ['小野純一郎', '石橋直子'],
        '放射線科': ['木内孝明']
      }
    },

    '屋島総合病院': {
      departments: {
        '内科': ['合田吉徳', '松岡裕士', '吉野すみ', '佐竹竹春', '吉本卓生', '加藤清仁', '坂本鉄平', '岡田愛子', '角直樹', '青木雄平', '筒井永莉'],
        '循環器内科': ['富永洋功', '大西弘倫', '岩部明弘'],
        '外科': ['斉藤誠', '植田宏治', '平井俊一', '堀志郎'],
        '整形外科': ['安藤健夫', '浅海浩二', '弓手康正', '真鍋博規', '大西慶生', '髙橋啓太'],
        '脳神経外科': ['河内正光', '高杉能理子', '前田八州彦'],
        '形成外科': ['杉野博崇'],
        '小児科': ['長野恵子', '松原満理'],
        '産婦人科': ['河西邦浩', '吉良正道'],
        '耳鼻咽喉科': [],
        '眼科': [],
        '皮膚科': ['中瀬美穂'],
        '泌尿器科': ['天野慎二', '間島大博'],
        '放射線科': ['北村弘樹'],
        '麻酔科': ['長井昭宏', '竹村瑞恵', '寺師卓哉'],
        '歯科': ['澤田誠司']
      }
    },

    '香川県済生会病院': {
      departments: {
        '総合診療科': ['田口弘和'],
        '消化器内科': ['尾立磨琴', '正木勉', '河野知樹', '水尾孝章', '元木史佳', '向井一貴'],
        '肝臓内科': ['正木勉', '尾立磨琴', '水尾孝章'],
        '循環器内科': ['江口智也'],
        '脳神経内科': ['山本遥平'],
        '腎臓内科': ['藤岡宏'],
        '糖尿病・内分泌代謝内科': ['吉岡佑紀'],
        '外科': ['若林久男', '石村健', '西村充孝', '前田典克', '野毛誠示'],
        '整形外科': ['真柴賛', '吉武新悟', '矢田俊介', '小野健太郎'],
        '小児科': ['岩城拓磨', '川口幸穂'],
        '眼科': ['杉田江妙子', '橋本佳苗'],
        '泌尿器科': ['尾木伸輔', '菅本隆雄'],
        '麻酔科': ['中野安耶子']
      }
    },

    '香川県立中央病院': {
      departments: {
        '総合診療科': ['髙口浩一', '松村周治', '泉川孝一', '馬越隆光', '伊藤太一', '乙宗佳奈子'],
        '消化器内科': ['稲葉知己', '和唐正樹', '田中盛富', '髙橋索真', '榊原一郎', '泉川孝一', '岡本邦男', '山本久美子', '山内健司', '安富絵里子', 'Colvin Hugh俊佑', '中西彬', '明石耕生', '澤田ひかり', '石濱佐和子', '中城健', '西本志緒里'],
        '呼吸器内科': ['宮脇裕史', '上田裕', '近藤大祐', '小島一輝', '前川玄輝'],
        '肝臓内科': ['髙口浩一', '永野拓也', '筒井朱美', '琢磨慧'],
        '腎臓・膠原病内科': ['平石宗之', '綿谷博雪', '氏家はる代', '大高望', '竹内千智'],
        '糖尿病内科': ['吉田淳', '中村圭吾', '黒岡直子'],
        '内分泌内科': ['佐々木恵里佳', '稲垣兼一'],
        '血液内科': ['脇正人', '奥真紀', '久保由起子', '松本香穂'],
        '循環器内科': ['土井正行', '野坂和正', '宮本真和', '岡田知明', '鵜川聡子', '十河将弘', '尾崎正知', '長谷川潤', '清山浩介', '山田隆史', '杉生有広', '辻修平', '曽我部大輔'],
        '脳神経内科': ['森本展年', '高橋義秋', '佐々木諒', '森本みずき'],
        '消化器・一般外科': ['大橋龍一郎', '矢野匡亮', '田中則光', '大谷弘樹', '須井健太', '髙橋優太', '津髙慎平', '岩田一馬', '向原史晃', '大川慎太郎', '横山拓海'],
        '呼吸器外科': ['三竿貴彦', '青江基', '塩谷俊雄'],
        '乳腺・内分泌外科': ['小笠原豊', '秋山一郎', '三好雄一郎'],
        '心臓血管外科': ['山本修', '寒川顕治', '藤本鋭貴', '奥山倫弘', '榊原裕', '山下雄真'],
        '脳神経外科': ['市川智継', '小野恭裕', '藏本智士', '岩戸英仁', '西廣真吾', '高橋悠', '池田彬人', '山内豊'],
        '整形外科': ['川崎啓介', '東野みどり', '吉川豪', '生熊久敬', '廣瀬友彦', '井上智雄', '高橋基城', '福岡史朗', '中村大', '国定俊之', '永野圭悟'],
        '形成外科': ['古市浩美', '木下雅人', '明石茜', '新田弘一朗', '品岡玲'],
        '小児科': ['伊藤滋', '佐藤潤', '岡本吉生', '宮井貴之', '有岡誠', '堀井由菜'],
        '皮膚科': ['石井芙美', '細川洋一郎', '河野淳子', '森下佳子'],
        '泌尿器科': ['谷本竜太', '甲斐誠二', '川野香', '久佐耕大', '鎌田聡子'],
        '産科・婦人科': ['中西美惠', '高田雅代', '永坂久子', '堀口育代', '早田裕', '矢野友梨', '米澤優', '児玉順一', '谷川りか'],
        '眼科': ['小山雄太', '濱中史奈'],
        '耳鼻咽喉科・頭頸部外科': ['平田裕二', '田中慎太郎', '森俊輔'],
        'リハビリテーション科': ['本田透', '小野恭裕', '西村彰代', '西本めぐみ'],
        '放射線科': ['赤木史郎', '田尻展久', '井原弘貴', '丸川洋平', '大川広', '山田実典'],
        '歯科・歯科口腔外科': ['柚鳥宏和', '石田優', '高橋由佳', '冨永萌', '藤村愛', '古木良彦', '助川信太郎'],
        '麻酔科': ['平崎盟人', '谷津祐市', '井上一由', '大西淳司', '小畑ダニエル', '黒江泰利', '安富苗波子', '小林収', '大西藍', '村上遙香', '西山波南', '濵口侑永'],
        '緩和ケア内科・ペインクリニック科': ['小西治子', '小畑ダニエル', '長谷川晴子'],
        '病理診断科': ['中村聡子', '安藤翠']
      }
    },

    '高松赤十字病院': {
      departments: {
        '血液内科': ['大西宏明', '福本哲也', '大野博文', '川野桂太郎', '牧平悠也'],
        '腫瘍内科': ['西内崇将'],
        '腎臓内科': ['横山倫子', '藤田拓朗', '佐伯浩一', '池上春香'],
        '内分泌代謝内科': ['大山知代', '石河珠代', '山本侑香', '大西祐以奈', '笠木寛治', '村尾孝児'],
        '消化器内科': ['柴峠光成', '玉置敬之', '松中寿浩', '久保敦司', '野田晃世', '真鍋卓嗣', '松浦賢史', '今戸涼資', '西村晃彦', '松本莉香', '田村友汰'],
        '循環器内科': ['外山裕子', '末澤知聡', '多田典弘', '宮崎晋一郎', '瀧波裕之', '寒川睦子', '津島翔', '山田桂嗣', '野田陽子', '坂本拓馬', '末次朋香', '谷川聡', '十河泰司', '石澤真'],
        '脳神経内科': ['峯秀樹', '荒木みどり'],
        '呼吸器内科': ['山本晃義', '六車博昭', '南木伸基', '林章人', '川田浩輔', '松田拓朗'],
        '膠原病・リウマチ内科': ['亀田智広', '山口勇将'],
        '感染症内科': ['坂口拓夢'],
        '小児科': ['市原朋子', '伊藤敏恭', '山戸聡史', '髙橋知也', '伊藤達宏', '宮本貴和子', '幸山洋子', '宮﨑雅仁', '寺田一也', '竹廣敏史', '大西達也'],
        '消化器外科': ['石川順英', '藤原理朗', '影山詔一', '山本尚樹', '浅野栄介', '森本智紀', '香西純'],
        '胸部・乳腺外科': ['監﨑孝一郎', '中川靖士', '法村尚子', '久保尊子', '山本清成', '三浦一真'],
        '小児外科': ['久保裕之'],
        '脳神経外科': ['香川昌弘', '新堂敦', '入江恵一郎', '福家共乃', '水谷成美'],
        '心臓血管外科': ['中山正吾', '中津太郎', '関勇輔'],
        '整形外科': ['三代卓哉', '浜田大輔', '筒井貴彦', '殿谷一朗', '玉置俊輔', '富山翔悟', '井形直紀', '三橋雅', '笠井時雄'],
        '形成外科': ['野網淳', '伊藤謹民', '細川敦司', '木暮鉄邦'],
        '皮膚科': ['眞部恵子', '廣瀬梓', '池澤勝吾', '藤岡希里子', '竹原彩', '砂川滉', '野村隼人'],
        '泌尿器科': ['泉和良', '三宅毅志', '尾﨑悠', '廣田圭祐', '多田航生', '野﨑雅弘', '川西泰夫', '藤原敦子'],
        '腎不全外科': ['山中正人'],
        '産婦人科': ['新田絵美子', '森陽子', '石橋めぐみ', '原田由里子', '門元辰樹', '赤松巧将', '後藤真樹', '原裕子'],
        '眼科': ['齋藤了一', '齋藤あゆみ', '永原裕紀子'],
        '耳鼻いんこう科': ['秋山貢佐', '和家旭志', '森敏裕'],
        '歯科口腔外科': ['米本嘉憲', '永田裕樹', '植松彩'],
        '精神科': ['井上幸代'],
        'リハビリテーション科': ['殿谷一朗'],
        '麻酔科': ['古泉真理', '中村明代', '菅原友道', '黒田ジュリオ健司', '藤坂真裕美', '大和麻友紀', '葉久鈴菜'],
        '放射線科': ['外山芳弘', '小野優子', '秋庭健志', '金只賢治', '竹治励', '久保亜貴子', '高岡友紀子', '遠迫俊哉', '今上雅史', '石村茉莉子', '高見康景'],
        '救急科': ['伊藤辰哉', '山内英雄'],
        '病理診断科': ['石川雅士', '木村なちの'],
        '臨床遺伝診療科': ['隈元謙介', '西内崇将'],
        '女性外来': ['法村尚子', '原裕子', '藤原敦子']
      }
    },

    '高松平和病院': {
      departments: {
        '内科': ['原田真吾', '蓮井宏樹', '豊岡志帆', '高木照幸', '何森晶', '穴吹和貴', '佐藤龍平', '植本一駿', '植本真由', '前田雛乃'],
        '緩和ケア内科': ['大西綾花', '穴吹和貴'],
        '整形外科': ['真鍋等', '中平旭'],
        '小児科': ['宮武孝子', '島田栞'],
        '病理科': ['佐藤明']
      }
    },

    '香川大学医学部附属病院': {
      departments: {
        '総合診療科': ['石川かおり', '市来智子', '森下朝洋', '鎌田英紀', '波間大輔'],
        '消化器内科（肝臓）': ['森下朝洋', '田所智子', '藤田浩二', '谷丈二', '大浦杏子', '中原麻衣'],
        '消化器内科（膵・胆）': ['小原英幹', '谷内田達夫', '中谷夏帆', '松井崇矩', '香川朋', '小山裕紀子'],
        '消化器内科（消化管）': ['鎌田英紀', '久保博之', '芳田峻典', '内田俊平', '植村麻希子', '藤田直樹', '山名浩喜'],
        '血液内科': ['門脇則光', '植村麻希子', '村尾孝児', '原田恵理', '佐藤誠祐', '小塚和博', '小林俊博'],
        '内分泌内科': ['土橋浩章', '島田裕美', '中島崇作', '杉原幸一', '牛尾友亮', '泉川美晴', '宮城太一', '渡邊直樹'],
        '糖尿病内科': ['佐伯岳信', '小林俊博', '吉村靖史'],
        '腎臓内科': ['金地伸拓', '吉村崇史', '石田智也', '井町仁美'],
        '膠原病・リウマチ内科': ['祖父江理', '大西啓右', '中村英祐', '國正靖'],
        '循環器内科': ['南野哲男', '大原美奈子', '野間貴久', '石澤真', '松永圭司', '三宅祐一', '井上卓哉', '飛梅淳', '村上和司', '本条崇行', '城妃咲', '石原優', '辻哲平', '大河啓介'],
        '脳神経内科': ['川北梨愛', '出口一志', '鎌田正紀', '紀乃正志', '高場啓太', '髙場塁太'],
        '呼吸器内科': ['辻晃仁', '大北仁裕', '塚本汐奈', '奥山浩之', '作山浩希', '喜田行洋', '金地伸拓', '井上卓敏', '渡邉直樹'],
        '腫瘍内科': ['奥山浩之', '塚本汐奈', '喜田行洋', '大北仁裕'],
        '緩和ケア科': ['村上あきつ'],
        '皮膚科': ['大日輝記', '山村健太郎', '鈴木幸奈', '松井友希', '眞鍋優佳', '野々宮結子', '田原綾'],
        '精神科神経科': ['中村祐', '森崇洋', '角徳文', '石川一朗', '樋笠直哉', '木戸瑞江', '野口勝宏', '佐々木皓大', '岡田裕希', '上野祐介', '柏瀬仁', '楠目直紀', '海老野佳穂', '藤井貴之', '高橋優斗', '森昭博'],
        '小児科': ['日下隆', '加藤育子', '高橋昌志', '西庄佐恵', '荻田博也', '福家典子', '岡田仁', '入江加奈子', '岩瀬孝志', '水尾杏海', '近藤健夫', '近藤園子', '若林誉幸', '中村信嗣', '安田真之', '森田啓督', '小谷野耕佑', '神内済', '小西行彦', '西岡克文', '金西賢治'],
        '周産期科・女性診療科': ['田中圭紀', '天雲千晶', '國友紀子', '花岡有為子', '塩田敦子', '伊藤恵', '香西亜優美', '合田亮人', '鎌田恭輔', '福家瑛子', '木村華捺', '金西賢治', '秦利之', '森信博', '石橋めぐみ', '佐野愛', '田中宏和'],
        '放射線治療科': ['髙橋重雄', '柴田徹', '西出崇将', '穴田雅英', '木下敏史', '柴田傑'],
        '放射線診断科': ['佐野村隆行', '則兼敬志', '三田村克哉'],
        '麻酔科': ['荻野祐一', '佐野愛', '中條浩介', '簗瀬賢', '戸田恵梨', '藤本悠'],
        '歯・顎・口腔外科': ['三宅実', '助川信太郎', '中井康博', '中井史', '雑賀将斗', '森浩喜'],
        '消化器外科': ['岡野圭一', '大島稔', '隈元謙介', '岸野貴賢', '須藤広誠', '西浦文平', '松川浩之', '竹谷洋', '安藤恭久', '馮東萍', '近藤彰宏', '松浦奈都美'],
        '呼吸器外科': ['矢島俊樹', '山田楓', '三﨑伯幸', '阿部宣子', '矢島玲奈', '池内真由美'],
        '乳腺・内分泌外科': ['堀井泰浩', '山下洋一', '北本昌平'],
        '心臓血管外科': ['田中彩', '下野隆一', '藤井喬之', '形見祐人'],
        '小児外科': ['下野隆一', '田中彩', '藤井喬之'],
        '整形外科': ['石川正和', '根ケ山敬大', '岩田憲', '森正樹', '伊達直人', '川田明伸', '山口幸之助', '岡邦彦', '小松原悟史', '西村英樹', '福岡奈津子', '山本修士'],
        '形成・美容外科': ['永竿智久', '細川敦司', '玉井求宜', '三柳友樹', '木暮鉄邦', '坂本道治', '仙田敬大'],
        '臨床遺伝ゲノム診療科': ['花岡有為子', '鎌田正紀', '鶴田智彦', '奥山浩之', '野間貴久', '隈元謙介', '小谷野耕佑'],
        '泌尿器科': ['杉元幹史', '上田修史', '内藤宏仁', '岡添誉', '田岡利宜也', '加藤琢磨', '阿部陽平', '小橋口佳な', '藤原健悟', '原田怜'],
        '脳神経外科': ['川西正彦', '三宅啓介', '岡内正信', '小川大輔', '藤森健司', '鈴木健太', '三野智', '多々納幹貴', '畠山哲宗'],
        '眼科': ['鈴間潔', '川島修', '篠原圭治', '中野裕貴', '坊岡阿紀', '三好由希子', '逢坂理恵', '小嶌洋和', '山田武叶', '多田羅祐介', '山下彩奈', '合田衣里奈', '小林展子', '石本彩', '村田晶子', '上枝舜治'],
        '耳鼻咽喉科・頭頸部外科': ['戸田光紀', '富岡史行', '樋口雅大', '宮下武憲', '高橋幸稔', '岸野毅日人', '大内陽平', '福村崇', '寒川泰', '星川広史', '藤原聖子']
      }
    }
  };

  // ヘルパー関数

  /**
   * 病院名の一覧を取得
   * @returns {string[]} 病院名の配列
   */
  function getHospitalNames() {
    return Object.keys(HOSPITALS);
  }

  /**
   * 病院の診療科一覧を取得
   * @param {string} hospitalName - 病院名
   * @returns {string[]} 診療科の配列
   */
  function getDepartments(hospitalName) {
    const hospital = HOSPITALS[hospitalName];
    return hospital ? Object.keys(hospital.departments) : [];
  }

  /**
   * 診療科の医師一覧を取得
   * @param {string} hospitalName - 病院名
   * @param {string} departmentName - 診療科名
   * @returns {string[]} 医師名の配列
   */
  function getDoctors(hospitalName, departmentName) {
    const hospital = HOSPITALS[hospitalName];
    if (!hospital) return [];
    return hospital.departments[departmentName] || [];
  }

  /**
   * 病院の全医師一覧を取得
   * @param {string} hospitalName - 病院名
   * @returns {Array<{department: string, name: string}>} 医師情報の配列
   */
  function getAllDoctors(hospitalName) {
    const hospital = HOSPITALS[hospitalName];
    if (!hospital) return [];

    const doctors = [];
    for (const [dept, names] of Object.entries(hospital.departments)) {
      for (const name of names) {
        doctors.push({ department: dept, name });
      }
    }
    return doctors;
  }

  /**
   * 医師名で検索（部分一致）
   * @param {string} query - 検索クエリ
   * @returns {Array<{hospital: string, department: string, name: string}>}
   */
  function searchDoctors(query) {
    const results = [];
    for (const [hospitalName, hospital] of Object.entries(HOSPITALS)) {
      for (const [deptName, doctors] of Object.entries(hospital.departments)) {
        for (const doctorName of doctors) {
          if (doctorName.includes(query)) {
            results.push({
              hospital: hospitalName,
              department: deptName,
              name: doctorName
            });
          }
        }
      }
    }
    return results;
  }

  // グローバルに公開
  window.HenryHospitals = {
    data: HOSPITALS,
    getHospitalNames,
    getDepartments,
    getDoctors,
    getAllDoctors,
    searchDoctors,
    version: GM_info?.script?.version || '1.1.0'
  };

  console.log('[HenryHospitals] Ready (v' + (GM_info?.script?.version || '1.1.0') + ')');
})();
